<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="sale_order_form_inherit_inet" model="ir.ui.view">
            <field name="name">sale.order</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">
                <xpath expr="//form[1]/sheet[1]/notebook[1]/page[@name='other_information']/group[1]" position="after">
                    <group name="group1">
                      <group name="group_left" string="Facturación y proyectos">
                          <field name="invoice_date"/>
                          <field name="payment_date_time"/>
                          <field name="end_date"/>
                      </group>
                      <group name="group_right">
                          
                      </group>
                    </group>
                </xpath>
                <xpath expr="//button[@name='action_confirm']" position="attributes">
                    <attribute name="confirm">Revisar los montos entre estimación y líneas de pedido. Si esta correcto, por favor dar click en Aceptar</attribute>
                </xpath>
                <xpath expr="//field[@name='payment_term_id']" position="attributes">
                    <attribute name="required">True</attribute>
                </xpath>
                <xpath expr="//field[@name='client_order_ref']" position="attributes">
                    <attribute name="required">True</attribute>
                </xpath>
                <xpath expr="//field[@name='partner_id']" position="after">
              <!--      <field name="contact_id" domain="[('parent_id', '=', partner_id)]"/> -->
                    <field name="contact_id_inet" required="1"/>
                    <field name="currency_sale"/>
                </xpath>
                <xpath expr="//field[@name='client_order_ref']" position="after">
                    <field name="estimated_category" required="1"/>
                </xpath>
                <xpath expr="//field[@name='order_line']" position="attributes">
                    <attribute name="readonly">True</attribute>
                </xpath>
                <xpath expr="//form/sheet/notebook/page[@name='order_lines']/field[@name='order_line']/tree/field[@name='product_id']" position="attributes">
                    <attribute name="string">Código Producto</attribute>
                </xpath>
                <xpath expr="//form/sheet/notebook/page[@name='order_lines']/field[@name='order_line']/tree/field[@name='product_id']" position="before">
                    <field name="item"/>
                </xpath>
                <xpath expr="//form/sheet/notebook/page[@name='order_lines']/field[@name='order_line']/tree/field[@name='name']" position="after">
                    <field name="brand_id"/>
                    <field name="product_uom" string="U.M"/>
                </xpath>
                <xpath expr="//form/sheet/notebook/page[@name='order_lines']/field[@name='order_line']/tree/field[@name='product_uom_qty']" position="after">
                    <field name="u_value"/>
                    <field name="discount_percent" string="% Desc."/>
                </xpath>
                <xpath expr="//form/sheet/notebook/page[@name='order_lines']/field[@name='order_line']/tree/field[@name='price_subtotal']" position="replace">
                    <field name="price_total_related" string="P. Total"/>
                </xpath>
                <xpath expr="//form/sheet/notebook/page[@name='order_lines']/field[@name='order_line']/tree/field[@name='tax_id']" position="replace">
                </xpath>
                <xpath expr="//page[@name='order_lines']" position="after">
                    <page string="Estimacion">
                        <button name="send_order_line" string="Pasar" type="object" attrs="{'invisible': [('state', '!=', 'draft')]}"/>
                        <field name="estimated_line">
                            <tree editable="bottom" default_order="item">
                                <field name="sequence" widget="handle"/>
                                <field name="item" readonly="False" force_save="True"/>
                                <field name="product_id" string="Código Producto"/>
                                <field name="name"/>
				<field name="brand_id"/>
                                <field name="product_uom" string="U.M"/>
                                <field name="cost_unit"/>
                                <field name="product_uom_qty" string="% Import"/>
                                <field name="cost_net_unit"/>
                                <field name="utility" string="% Margen"/>
                                <field name="u_value" readonly="True"/>
                                <field name="discount_percent" string="% Desc."/>
                                <field name="discount" readonly="True" string="Desc."/>
                                <field name="price_unit" string="P. Unit"/>
                                <field name="qty" string="Cant."/>
                                <field name="cost_total"/>
                                <field name="amount_utility" string="Utilidad"/>
                            </tree>
                        </field>
                        

                        <div class="o_row">
                            <group>
                                <group colspan="1" col="2" invisible="True">
                                    <field name="profitability_1"/>
                                    <field name="profitability_2"/>
                                    <field name="profitability_3"/>
                                    <field name="profitability_4"/>
                                    <field name="commission_1"/>
                                    <field name="commission_2"/>
                                    <field name="commission_3"/>
                                    <field name="commission_4"/>
                                </group>
                                <group class="oe_subtotal_footer oe_center">
                                        <field name="cost_totals"/>
                                        <field name="price_totals" />
                                        <field name="total_utility"/>
                                        <field name="commision"/>
                                        <field name="commision_pre"/>
                                        <field name="cost_effectiveness"/>
                                </group>
                            </group>
                        </div>
                    </page>
                    <page string="Parametros reales">
                        <group>
                            <group>
                                <field name="cost_totals_real" force_save="1"/>
                                <field name="price_totals_real"  readonly="True" force_save="1"/>
                                <field name="total_utility_real" readonly="True" force_save="1"/>
                                <field name="commision_real" readonly="True" force_save="1"/>
                                <field name="commision_pre_real" readonly="True" force_save="1"/>
                                <field name="cost_effectiveness_real" readonly="True" force_save="1"/>
                            </group>
                            <group>
                                <field name="responsable1_user_id" options="{'no_create': True, 'no_create_edit':True}"/>
                                <field name="responsable2_user_id" options="{'no_create': True, 'no_create_edit':True}"/>
                                <field name="one_part"/>
                                <field name="two_part"/>
                            </group>
                            <group>
                                
                            </group>
                            <group>
                                <field name="commercial"/>
                                <field name="presale1"/>
                                <field name="presale2"/>
                                <field name="total_comission"/>
                            </group>
                        </group>
                    </page>
                </xpath>
            </field>
        </record>
 	<record id="sale_order_tree_view_inet" model="ir.ui.view">
            <field name="name">sale.order.tree.inet</field>
            <field name="model">sale.order</field>
            <field name="priority" eval="8" />
            <field name="arch" type="xml">
                <tree string="courses" edit="false" create="false">
                    <field name="name" string="OP"/>
                    <field name="state" invisible="True"/>
                    <field name="partner_id" string="Razón social cliente"/>
                    <field name="user_id" string="Comercial"/>
                    <field name="date_order" string="Fecha de pedido"/>
                    <field name="validity_date" string="Fecha de finalización"/>
                    <field name="payment_date_time" string="Fecha de pago"/>
                    <field name="amount_untaxed" string="Sub total – base imponible"/>
                    <field name="cost_effectiveness" string="Rentabilidad estimada"/>
                    <field name="cost_effectiveness_real" string="Rentabilidad real"/>
                    <field name="commision" string="Comisión estimada"/>
                    <field name="commision_real" string="Comisión real"/>
                    <field name="estimated_category"/>
                </tree>
            </field>
        </record>
        <record model="ir.actions.act_window" id="action_sale_order_tree_view_inet">
            <field name="name">Reporte de ventas</field>
            <field name="res_model">sale.order</field>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="sale_order_tree_view_inet"/>
            <field name="domain">[]</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Reporte de ventas Inet
                </p>
            </field>
        </record>

        <record id="sale_order_tree_inherit_inet" model="ir.ui.view">
            <field name="name">sale.order.tree.inherit</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_quotation_tree_with_onboarding"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='user_id']" position="after">
                    <field name="invoice_date"/>
                    <field name="currency_id"/>
                    <field name="currency_sale" invisible="1"/>
                </xpath>
            </field>
        </record>

        <menuitem 
            id="menu_sale_order_tree_view_inet" 
            name="R. Ventas" 
            parent="sale.menu_sale_report"
            action="action_sale_order_tree_view_inet"/>
    </data>
</odoo>
